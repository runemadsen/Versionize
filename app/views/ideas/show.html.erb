<div class="grid_9">
	<h1><%= @idea.name %></h1>
	
</div>
<div class="grid_3">
	<p id="version_text">This idea has <%= pluralize(@idea.num_commits, "version") %></p>
</div>

<div class="clear"></div>
<div class="grid_12 dotted_line_small"></div>

<div class="grid_8">

	Current branch: <%= @branch %>
	<%# if @idea.repository.heads.count > 1 %>
	<div id="branch_box">
		<ul>
			<li>Branches:</li>
			<% @idea.repository.heads.each do |head| %>
				<li><%= link_to head.name, "#" %></li>
			<% end %>
		</ul>
		<div class="clear"></div>
	</div>
	<%# end %>
	
	<% if @edit %>
	<div id="media_box">
		<ul>
			<li>Insert</li>
			<li><%= link_to "Link", new_idea_link_path(@idea)%></li>
			<li><%= link_to "Text", new_idea_text_path(@idea)%></li>
			<li><%= link_to "Image", new_idea_image_path(@idea) %></li>
		</ul>
		<div class="clear"></div>
	</div>
	<% end %>

	<% @idea.version(@version).each_with_index do |content, i| %>
		
		<% if i == 0 %>
			<%= render :partial => "texts/description", :locals => {:text => content, :edit => @edit} %>
		<% else %>
			<%= render :partial => content.class.name.pluralize.downcase + "/" + content.class.name.downcase, 
									:locals => { content.class.name.downcase.to_sym => content, :edit => @edit} %>
		<% end %>
	<% end %>
	
</div>
<div class="grid_1">&nbsp;</div>
<div class="grid_3">

	<% @idea.repository.commits.each_with_index do |commit, i| %>
		<% v_num = @idea.num_commits - i %>
		<%= link_to v_num, link_to_version(@idea, @branch, v_num), :class => "version_box color#{v_num % 9}" %>
	<% end %>
	
	<div id="drop_box">
		<div id="placeholder">Drop Idea Items Here</div>
	</div>
	
	<% form_tag %>
	
	<p id="add_collaborator"><%= link_to "Edit collaborators", idea_collaborations_path(@idea) %><br />
		<%= link_to("Delete idea", idea_path(@idea), :method => :delete, :confirm => "Are you sure you want to delete the idea?") if @idea.is_owner? @current_user %>
	</p>
	
</div>
<div class="clear"></div>
	
	
